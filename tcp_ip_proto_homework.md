# 一、延时 吞吐量练习题

1.一台分组交换机接收到一个分组并决定该分组应当转发的链路。当某分组到达时,另一个分组正在该出链路上被发送到一半,还有4个其他分组正在等待传输。这些分组以到达的次序传输。假定所有分组是1500bytes并且链路速率是2Mbps。该分组的排队时延时多少?

```
答：前面等待了4.5个分组，也就是4.5 * 1500 = 6750Bytes，然后1Byte = 8bit，所以6750Bytes = 54000bit，所以排队时延为NL/R = 54000/(2*10^6) = 27ms。
```

2.假定有N个分组同时到达一条当前没有分组传输或排队的链路。每个分组长为L,链路传输速率为R。对于N个分组而言,其平均排队时延时多少?

```
答：平均排队时延时为：L*(N-1)/2R
```

3.接上题,现在假定每隔LN/R秒就有N个分组同时达到链路。一个分组的平均排队时延时多少?

```
答：由于LN/R比(N-1)*L/2R大，所以在下一次N个分组来之前，上一次N个分组已经处理完了，没有额外排队时延，所以平均排队时延依然是L*(N-1)/2R。
```

4.考虑路由器缓存中的排队时延。忽略传播时延和处理时延。令I表示流量强度;I=La/R。假定排队时延的形势为 IL/R(1-I),其中 I<1。
a.写出总时延公式；
b.令a表示在一条链路上分组的到达率(分组/秒 为单位),令u表示一条链路上分组的传输率(分组/秒)。基于上述公式写出以a和u表示的总延时公式

```
答：总时延公式：IL/R(1-I)+L/R = L/(1-I)R。
```


# 二、应用层练习

1.Http与Https的区别。

  ```
  答：HTTPS和HTTP的区别主要如下：
　　  1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。
　　  2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。
　　  3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
　　  4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。
  ```
  
2.URI和URL的区别。

```
答：URI和URL的区别如下：
   1、URI是以一种抽象的，高层次概念定义统一资源标识，而URL则是具体的资源标识的方式。URL是一种URI。
    2、格式不同：URL的格式一般由下列三部分组成:第一部分是协议(或称为服务方式);第二部分是存有该资源的主机IP地址(有时也包括端口号);第三部分是主机资源的具体地址。URI一般由三部分组成:访问资源的命名机制；存放资源的主机名；资源自身的名称，由路径表示。
```

3.HTTPS工作原理。

```
工作原理简述如下：
    HTTPS在传输数据之前需要客户端（浏览器）与服务端（网站）之间进行一次握手，在握手过程中将确立双方加密传输数据的密码信息。TLS/SSL中使用了非对称加密，对称加密以及HASH算法。握手过程的简单描述如下：
    1.浏览器将自己支持的一套加密规则发送给网站。
    2.网站从中选出一组加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器。证书里面包含了网站地址，加密公钥，以及证书的颁发机构等信息。
    3.获得网站证书之后浏览器要做以下工作：
　　     a) 验证证书的合法性（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。
　　     b) 如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。
　　     c) 使用约定好的HASH计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给网站。
    4.网站接收浏览器发来的数据之后要做以下的操作：
　　     a) 使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致。
　　     b) 使用密码加密一段握手消息，发送给浏览器。
    5.浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后所有的通信数据将由之前浏览器生成的随机密码并利用对称加密算法进行加密。
   这里浏览器与网站互相发送加密的握手消息并验证，目的是为了保证双方都获得了一致的密码，并且可以正常的加密解密数据，为后续真正数据的传输做一次测试。另外，HTTPS一般使用的加密与HASH算法如下：
　　非对称加密算法：RSA，DSA/DSS
　　对称加密算法：AES，RC4，3DES
　　HASH算法：MD5，SHA1，SHA256
   其中非对称加密算法用于在握手过程中加密生成的密码，对称加密算法用于对真正传输的数据进行加密，而HASH算法用于验证数据的完整性。由于浏览器生成的密码是整个数据加密的关键，因此在传输的时候使用了非对称加密算法对其加密。非对称加密算法会生成公钥和私钥，公钥只能用于加密数据，因此可以随意传输，而网站的私钥用于对数据进行解密，所以网站都会非常小心的保管自己的私钥，防止泄漏。
    TLS握手过程中如果有任何错误，都会使加密连接断开，从而阻止了隐私信息的传输
```

4.一次完整的HTTP请求所经历的7个步骤。

```
   HTTP通信机制是在一次完整的HTTP通信过程中，Web浏览器与Web服务器之间将完成下列7个步骤：
1. 建立TCP连接
   在HTTP工作开始之前，Web浏览器首先要通过网络与Web服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即著名的TCP/IP协议族，因此Internet又被称作是TCP/IP网络。HTTP是比TCP更高层次的应用层协议，根据规则，只有低层协议建立之后才能进行更高层协议的连接，因此，首先要建立TCP连接，一般TCP连接的端口号是80。
2. Web浏览器向Web服务器发送请求命令
   一旦建立了TCP连接，Web浏览器就会向Web服务器发送请求命令。例如：GET/sample/hello.jsp HTTP/1.1。
3. Web浏览器发送请求头信息
   浏览器发送其请求命令之后，还要以头信息的形式向Web服务器发送一些别的信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。
4. Web服务器应答
   客户机向服务器发出请求后，服务器会客户机回送应答， HTTP/1.1 200 OK ，应答的第一部分是协议的版本号和应答状态码。
5. Web服务器发送应答头信息
   正如客户端会随同请求发送关于自身的信息一样，服务器也会随同应答向用户发送关于它自己的数据及被请求的文档。
6. Web服务器向浏览器发送数据
   Web服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据。
7. Web服务器关闭TCP连接
   一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或者服务器在其头信息加入了这行代码：Connection:keep-alive
   TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。
```

5.常见的HTTP相应状态码。

```
状态码如以3位数字和原因短语组成。数字中的第一位指定了响应类别,后两位无分类。响应类别有以下5种。
   1XX Informational(信息性状态码) 接收的请求正在处理
   2XX Sucxess（成功状态码） 请求正常处理完毕
   3XX Redirection（重定向状态码） 需要进行附加操作以完成请求
   4XX Client Error（客户端错误状态码） 服务器无法处理请求
   5XX Server Error（服务器错误状态码） 服务器处理请求出错
常见状态码：
   200 OK 表示从客户端发来的请求在服务器端被正常处理了。
   301 Moved Permanently 永久性重定向。
   302 Found 临时性重定向。
   400 Bad Request 该状态码表示请求报文中存在语法错误。
   403 Forbidden 该状态码表明对请求资源的访问被服务器拒绝了。
   404 Not Found 该状态码表明服务器上无法找到请求的资源。
```

6.TCP协议和UDP协议的区别是什么。

```
TCP: Tansmission Control Protocol 传输控制协议
UDP：User Dategram Protocol 用户数据包协议
区别：
    TCP是面向连接的传输方式，即通信双方交换数据之前必须建立连接，而且是一种可靠的，有多种确保数据传输可靠性的机制（确认机制、窗口机制），并且是采用字节流服务，以8bit（1Byte）为最小单位构成字节流进行传输。
    UDP是一种传输数据前无需进行连接即可传输数据的方式，并且传输不可靠，没有确保数据传输的可靠性机制，无重发和纠错功能，数据服务中，UDP发送进程发送的数据报文都是独立的，因此UDP不是面向流的协议。
```

7.TCP建立连接的过程采用三次握手，已知第三次握手报文的发送序列号为555，确认序列号为6666，请问第二次握手报文的发送序列号和确认序列号分别为？

```
答：第三次握手报文发送序列号为第二次的确认序列号，则第二次的确认序列号为555，第三次的确认序列号为第二次的发送序列号加1，则第二次的发送序列号为6666 - 1 = 6665。
```

8.简述tcp/ip四层模型。

```
1.应用层：
   各种服务及应用程序通过该层利用网络，常用协议：HTTP、FTP、SMTP（简单邮件传输协议）等。
2.传输层：
    确认数据传输及进行纠错处理，常用协议：TCP、UDP（用户数据报协议）。
3.网络层：
    负责数据的传输路径及地址选择，常用协议：IP、ARP（地址解析协议）。
4.网络接口层：
    是针对不同的物理网络的连接形式的协议，例如：FDDI、ATM、Ethernet。

```

9.简述osi七层模型。

```
1.应用层：
    提供应用程序运行环境、负责管理和执行应用程序；
2.表示层：
    为数据在传输之前进行加密、解密、解压缩及终端数据格式提供一套规则和约定；
3.会话层：
    对会话的双方进行资格审查和验证规则，同时规定发送的双工模式；
4.传输层：
    两个主要目的：
       1、传输层可以提供在不同系统之间的进程间数据校核的可靠服务，在网络内两个实体之间建立端到端的通信信道，用来传输信息或报文分组，本层提供两端点可靠、透明的数据传输；
       2、为会话层提供与网络类型无关的可靠信息传输机制，对会话层屏蔽了下层网络操作细节。
5.网络层：
    负责建立、保持和终止通过中间设备的链接，同时负责通信子网内路径选择和拥挤控制。
6.数据链路层：
    主要功能：如何将数据组成块（帧），帧就是本层的传输单位，如何处理数据在传输过程中出现差错，如何调节发送速率使之与接收方匹配，在两个网络实体之间提供数据链路的建立、维持和释放的管理；
7.物理层：
    包括设备之间物理连接的接口和用户设备与网络终端设备之间的传输规则；
```

10.dns是什么 dns是哪一层协议。

```
答：DNS：Domain Name System 域名系统。DNS是应用层的协议，是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。
```

11.arp是哪一层协议。

```
答：ARP：Address Resolution Protocol 地址解析协议。ARP是网路层的协议。
```

12.wifi是哪一层协议。

```
答：wifi是802.15和802.11的技术标准。802.11主要是针对局域网的相关标准。而局域网是工作在OSI数据链路层和物理层的，故WiFi属于osi七层模型中的数据链路层和物理层中。
```

13.简述cdn作用。 #运输层网络层练习题。

```
答：CDN的全称是Content Delivery Network，即内容分发网络。CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。
```

14.服务器发生close wait是在什么时候。

```
CLOSE_WAIT状态的生成原因
首先我们知道，如果我们的Client程序处于CLOSE_WAIT状态的话，说明套接字是被动关闭的！
因为如果是Server端主动断掉当前连接的话，那么双方关闭这个TCP连接共需要四个packet：
Server ---> FIN ---> Client
Server <--- ACK <--- Client
这时候server端处于FIN_WAIT_2状态；而程序处于CLOSE_WAIT状态。
Server <---FIN <--- Client
这时Client发送FIN给Server，Client就置为LAST_ACK状态。
Server --->ACK ---> Client
Server回应了ACK，那么Client的套接字才会真正置为CLOSED状态
```

15.简述syn洪攻击。

```
答：SYN攻击利用的是TCP的三次握手机制，攻击端利用伪造的IP地址向被攻击端发出请求，而被攻击端发出的响应 报文将永远发送不到目的地，那么被攻击端在等待关闭这个连接的过程中消耗了资源，如果有成千上万的这种连接，主机资源将被耗尽，从而达到攻击的目的。
```

16.156.123.32.13 是哪一类ip地址。

```
答：156.123.32.13是B类地址。
```
17.主机ip地址为 193.32.5.22 掩码为 255.255.255.192 网络地址为多少,广播地址为多少？

```
答：193.32.5.22换成二进制为1100 0001.0010 0000.0000 0101.0001 0110
   255.255.255.192换成二进制为1111 1111.1111 1111.1111 1111.1100 0000。
两者进行与运算，得出网络地址为：1100 0001.0010 0000.0000 0101.0000 0000，即193.32.5.0。
网络位之后的地址都取1，得出广播地址为1100 0001.0010 0000.0000 0101.0011 1111，即193.32.5.
```

18.icmp是哪一层协议。

```
答:ICMP（Iterenet Control message Protocol 互联网控制消息协议）是网络层中的协议。
```

19.get方法和post方法的不同。

```
1.get是从服务器上获取数据，post是向服务器传送数据。
2.get是把参数数据队列加到提交表单的ACTION属性所指的URL中，值和表单内各个字段一一对应，在URL中可以看到。post是通过HTTPpost机制，将表单内各个字段与其内容放置在HTML HEADER内一起传送到ACTION属性所指的URL地址。用户看不到这个过程。
3.对于get方式，服务器端用Request.QueryString获取变量的值，对于post方式，服务器端用Request.Form获取提交的数据。
4.get传送的数据量较小，不能大于2KB。post传送的数据量较大，一般被默认为不受限制。但理论上，IIS4中最大量为80KB，IIS5中为100KB。
5.get安全性非常低，post安全性较高
```

20.简述DOS攻击和DDOS攻击。

```
答：DDOS是DOS攻击中的一种方法。
　　DoS：是Denial of Service的简称，即拒绝服务，不是DOS操作系统，造成DoS的攻击行为被称为DoS攻击，其目的是使计算机或网络无法提供正常的服务。最常见的DoS攻击有计算机网络带宽攻击和连通性攻击。
　　DDOS：分布式拒绝服务(DDoS:Distributed Denial of Service)攻击指借助于客户/服务器技术，将多个计算机联合起来作为攻击平台，对一个或多个目标发动DDoS攻击，从而成倍地提高拒绝服务攻击的威力。
　　举一个最通俗的例子，在TCP建立连接时三次握手中，如果说攻击端，发送完第一次握手的数据后，然后就“消失”了，那么服务器就会不断的发送第二次握手的数据，可是攻击端的人找不到了。
```
21.tcp报文头中,首部长度的作用是什么?首部长度是多少位?首部的位数为二进制表现方式,那么首部表现成十进制的最大数字是多少?tcp首部最大长度是多少,他和首都长度段有什么联系?tcp首部可选数据字段是多长?

```
答：首部长度的作用：它指出TCP报文段的数据起始处距离TCP报文段的起始处有多远。首部长度占4位，可表示的最大十进制值是15，这个字段的单位是32位字(4字节)，所以当IP首部长度为1111(就是十进制15)，首部长度就达到最大值4 X 15 = 60字节,首部长度与首部长度段的关系为代表报文头数据偏移的值，因为选项长度固定占了20字节，则tcp首部可选数据字段最大为40字节。
```

22.tcp最大端口号是多少?为什么?linux系统能开启多少个端口，为什么？linux操作系统端口号和进程号的关系是什么?

```
答：最大端口号为65535，因为tcp端口号在tcp报文头中声明的，端口号占用16bit，共最大可到达2^16 = 65536个端口,所以端口号取值0～65535。
   linux也是使用TCP/IP规范，则端口范围就是0-65535，其中全0没有意义，所以可用端口1-65535。
   linux操作系统端口号和进程号之间并没有什么必然的联系，只是进程通过端口来使用，在端口被相应进程使用时，可以使用端口号找到该进程，但端口号和进程号之间并没有直接关系。
```

23.tcp三次握手中 第三次握手首部中syn值是多少 为什么?

```
答：第三次握手时syn=0。
   因为发送端发送一个SYN=1，ACK=0标志的数据包给接收端，请求进行连接，这是第一次握手；
   接收端收到请求并且允许连接的话，就会发送一个SYN=1，ACK=1标志的数据包给发送端，告诉它，可以通讯了，并且让发送端发送一个确认数据包，这是第二次握手；
   最后，发送端发送一个SYN=0，ACK=1的数据包给接收端，告诉它连接已被确认，这就是第三次握手。之后，一个TCP连接建立，开始通讯
```

24.tcp协议中ISN是什么意思?ISN的值一定是1吗?BSD使用的ISN值的方案是什么?不同的连接ISN一样吗,如果不一样如何确定?（参考RFC 793）

```
答：tcp连接三次握手的时候，客户端和服务端在建立tcp连接时，双方都会发送SYN报文并初始化序号（英文为：Initial Sequence Number，简称ISN），ISN的值不一定是1，是随机生成的。
```

25.tcp协议中 序列号是如何增长的,是每次加1还是随机增长还是其他方式增长?第三次握手时 ack序列号是否增加 为什么?第一次握手响应时ack序列号加多少 为什么?

```
答：是每次增加1的方式增长，第三次握手时序列号是第二次握手的确认号，故没有增加。第一次握手响应的ACK序列号不确定，因为是随机生成的。
```

26.mss是什么?mss在什么时候确定?tcp报文最大长度理论上是多少 为什么?实际上面是多少 为什么?

```
答：MSS最大传输大小的缩写，是TCP协议里面的一个概念。MSS就是TCP数据包每次能够传输的最大数据分段。为了达到最佳的传输效能TCP协议在建立连接的时候通常要协商双方的MSS值，这个值TCP协议在实现的时候往往用MTU值代替（需要减去IP数据包包头的大小20Bytes和TCP数据段的包头20Bytes）, 通讯双方会根据双方提供的MSS值得最小值确定为这次连接的最大MSS值。而一般以太网MTU都为1500, 所以在以太网中, 往往TCPMSS为1460。
```

27.tcp最大长度是多少,为什么?

```
答：链路层最多能承载65535长度的ip数据包(MTU)，IP头最少20个字节，TCP头最少也是20个字节。所以TCP报文段能携带的数据最多就是65535-20-20=65495B。
```

28.tcp窗口/mss大小如何确定,在什么时候,什么位置确定窗口/mss大小?

```
答：1、MSS(Max Segment Size) 是TCP数据包每次能够传输的最大数据分段，其中并不包括TCP首部。而且MSS只出现在syn报文段中。一般来说，MSS的值在不分段的情况会越大越好，比如一个外出接口的MSS值是MTU减去IP和TCP首部长度。
　　2、窗口大小是个动态的值，因为TCP是用的滑动窗口协议，传输数据的速率都是根据窗口大小来调整的。可以把窗口理解为一个缓存，而且窗口大小跟MSS是没有任何关系的。
　　3、窗口是为了控制传输过程中的速度。而MSS只是控制TCP报文段大小。
```

29.如何理解tcp的半关闭(half-close)？什么是全双工?

```
答：半关闭：tcp的半关闭状态发生在断开连接时的四次释放时，相当于客服端先向服务器发出断开连接请求后，服务器端第一次做出回应后连接处于半关闭状态，此时客户端不再向服务器端发送报文，但是若服务端还有数据需要传输给客户端，客户端仍然接收，当传输完成后，由服务端发送断开连接，待客户端确认后才完全断开连接。
   全双工：全双工（Full Duplex）是通讯传输的一个术语。通信允许数据在两个方向上同时传输，它在能力上相当于两个单工通信方式的结合。全双工指可以同时（瞬时）进行信号的双向传输（A→B且B→A）。指A→B的同时B→A，是瞬时同步的。
```

30.为什么握手需要三次?为什么关闭连接需要四次?

```
答：TCP建立连接要进行3次握手,而断开连接要进行4次,这是由于TCP的半关闭造成的,因为TCP连接是全双工的(即数据可在两个方向上同时传递)所以进行关闭时每个方向上都要单独进行关闭,这个单方向的关闭就叫半关闭。关闭的方法是一方完成它的数据传输后,就发送一个FIN来向另一方通告将要终止这个方向的连接.当一端收到一个FIN,它必须通知应用层TCP连接已终止了这个方向的数据传送,发送FIN通常是应用层进行关闭的结果.
```

31.GBN的定时器有几个？SR的定时器有几个？

```
答：GBN：有发送方缓存，无接收方缓存，一个定时器（可认为最早的已发送但还未被确认的分组所使用的计时器），丢弃失序分组，采用累计确认。
   SR：有发送方缓存，有接收方缓存，每个分组都有定时器，缓存失序分组，不采用累计确认。
```

32.为什么说tcp协议是面向连接的?

```
答：tcp是需要确认的协议，简单地说就是要三次握手，每次需要和服务器之间进行通信时都需要建立连接后方可通信，故说tcp协议是面向连接的协议。
```

33.GBN协议中,接收方窗口大小是多少？

```
答：BSD中默认设置发送和接受缓冲区的大小为2048字节。
```

34.GBN协议中,需要对大于当前期望收到的分组序号的序号做确认吗?SR中需要确认吗?

```
答：在GBN协议中,需要对大于当前期望收到的分组序号的序号做确认，SR中不需要确认。
```

35.TCP/IP的中文解释是什么?

```
答：TCP/IP是“transmission Control Protocol/Internet Protocol”的简写，中文译名为传输控制协议/互联网络协议。是一种网络通信协议，它规范了网络上的所有通信设备，尤其是一个主机与另一个主机之间的数据往来格式以及传送方式。TCP/IP是INTERNET的基础协议，也是一种电脑数据打包和寻址的标准方法。在数据传送中，可以形象地理解为有两个信封，TCP和IP就像是信封，要传递的信息被划分成若干段，每一段塞入一个TCP信封，并在该信封面上记录有分段号的信息，再将TCP信封塞入IP大信封，发送上网。在接受端，一个TCP软件包收集信封，抽出数据，按发送前的顺序还原，并加以校验，若发现差错，TCP将会要求重发。因此，TCP/IP在INTERNET中几乎可以无差错地传送数据。对普通用户来说，并不需要了解网络协议的整个结构，仅需了解IP的地址格式，即可与世界各地进行网络通信。 
```

36.假设链路层MTU为1600那么MSS最大为多少？

```
答：假设链路层MTU为1600，那么MSS最大为1600 - 20 - 20 = 1560。
```

37.MSS指的是什么的大小。

```
答：MSS（Maximum Segment Size，最大报文长度），是TCP协议定义的一个选项，MSS选项用于在TCP连接建立时，收发双方协商通信时每一个报文段所能承载的最大数据长度。
```

38.计算机的端口为什么最大是65535。

```
答：因为在TCP协议中，在TCP报头中端口只用两个字节来存储。两字节最多只能编码0 ~ 2^16这么多的端口，即端口最大只能到65535。
```

39.
a. 假定你有下列2个字节: 01011100和01100101。者两个字节之和的反码是什么?

```
答：01011100和01100101为两个正数，之和为0100 0001，产生溢出，它的反码为0100 0001，即他本身。
```

b.假定你有下列2个字节: 11011010和01100101这两个的反码和是多少?

```
答：1101 1010的反码为1010 0101。
   0110 0101的反码为1010 0101，即他本身。
   两者反码之和为：1100 1010。
```
c. 1bit的差错将可能检测不出来吗?2bit呢?

```
答：绝大多数情况下，奇偶校验法是有效的检测1bit的差错。但在数据传输崩溃情况下，也就是一个byte里会有两个或以上以上bits同时出错时，奇偶校验法也无能为力。
```
